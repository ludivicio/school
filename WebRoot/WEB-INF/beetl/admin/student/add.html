<# layout("/admin/common/_layout.html") { #>


<div class="row">
	<div class="col-md-12">
		<div class="widget">

			<div class="widget-head">
				<div class="pull-left">录入学生信息</div>
				<div class="clearfix"></div>
			</div>

			<div class="widget-content">
				<div class="padd">

					<form class="form-horizontal" action="${CONTEXT_PATH}/admin/student/save" method="post" enctype="multipart/form-data" role="form">

						<input type="hidden" value="${student.id!}" name="student.id" />
						
						<div class="form-group">
						
							<label class="control-label col-lg-1" for="student.name">姓 名</label>
							<div class="col-lg-3 ${exist( nameMsg!, 'has-error') }">
								<input type="text" class="form-control input-sm" name="student.name"
									value="${student.name!}" />
							</div>
								<p class="help-block col-lg-2">学生的完整名称（必填项）</p>
							
							<label class="control-label col-lg-1" for="student.identity">身份证</label>
							<div class="col-lg-3 ${ exist( identityMsg!, 'has-error')}">
								<input type="text" class="form-control input-sm" name="student.identity"
									value="${student.identity!}" />
							</div>
								<p class="help-block col-lg-2">学生的身份证（必填项）</p>

						</div>

						<div class="form-group">
						
						 	<label class="control-label col-lg-1" for="student.sid">学校名称</label>
							<div class="col-lg-3">
								<select class="form-control input-sm" name="student.sid" >
									<option value="-1">请选择学校</option>
									<# for(school in schoolList!){ #>
										<option value="${school.id!}" ${ school.id! == student.sid! ? "selected=selected" : "" }>${school.name!}</option>
									<# } #>
								</select>
							</div>
							<p class="help-block col-lg-2">（必填项）</p>
						
						 	<label class="control-label col-lg-1" for="student.cid">班 级</label>
							<div class="col-lg-3" id="insertClass">
								<select class="form-control input-sm" name="student.cid">
									<option value="-1" >请选择班级</option>
								<# for(class in classList!){ #>
									<option value="${class.id!}" ${ class.id! == student.cid! ? "selected=selected" : "" }>${class.name!}</option>
								<# } #>
								</select>
								
							</div>
							<p class="help-block col-lg-2">选择学校后才有班级（必填项）</p>
						</div>
						
						<div class="form-group">
						
							<label class="control-label col-lg-1" for="student.sex">性 别</label>
							<div class="col-lg-3">
								<select class="form-control input-sm" name="student.sex">
									<option value="0" ${ student.sex! == 0 ? "selected=selected" : "" } >男</option>
									<option value="1" ${ student.sex! == 1 ? "selected=selected" : "" } >女</option> 
								</select>
							</div>
							<p class="help-block col-lg-2">（必填项）</p>
							
							<label class="control-label col-lg-1" for="student.status">学生状态</label>
							<div class="col-lg-3 ${ exist( statusMsg!, 'has-error') }">
								<select class="form-control input-sm" name="student.status">
									<option value="0" ${ student.status! == 0 ? "selected=selected" : "" } >在校</option> 
									<option value="1" ${ student.status! == 1 ? "selected=selected" : "" } >退学</option> 
									<option value="2" ${ student.status! == 2 ? "selected=selected" : "" } >休学</option> 
								</select>
							</div>
							<p class="help-block col-lg-2">（必填项）</p>
							
						</div>						
						
						<div class="form-group">
							
							<label class="control-label col-lg-1" for="student.birthplace">籍 贯</label>
							<div class="col-lg-5 ${ exist( birthplaceMsg!, 'has-error') }">
								<input type="text" class="form-control input-sm" name="student.birthplace" value="${student.birthplace!}" />
								<p class="help-block">籍贯精确到市（县）</p>
							</div>
							
							<label class="control-label col-lg-1" for="student.birth">出生日期</label>
							<div class="col-lg-3 ${ exist( birthMsg!, 'has-error') }">
								<input type="text" class="form-control input-sm" name="student.birth"
									value="${student.birth!}" />
								<p class="help-block">出生日期例【1992-10-11】</p>
							</div>
						</div>


						<div class="form-group">
						
						 	<label class="control-label col-lg-1" for="student.national">民 族</label>
							<div class="col-lg-3 ${ exist( nationalMsg!, 'has-error') }">
								<input type="text" class="form-control input-sm" name="student.national" value="${student.national!}" />
							</div>
							<p class="help-block col-lg-2">（必填项）</p>
							
							<label class="control-label col-lg-1" for="student.feature">政治面貌</label>
							<div class="col-lg-3">
								<select class="form-control input-sm" name="student.feature">
									<option value="1" ${ student.feature! == 1 ? "selected=selected" : "" } >团员</option>
									<option value="2" ${ student.feature! == 2 ? "selected=selected" : "" } >群众</option> 
								</select>
							</div>
							<p class="help-block col-lg-2">（必填项）</p>
							
						</div>

						<div class="form-group">
							
							<label class="control-label col-lg-1" for="student.address">家庭住址</label>
							<div class="col-lg-5 ${ exist( addressMsg!, 'has-error') }">
								<input type="text" class="form-control input-sm" name="student.address" value="${student.address!}" />
								<p class="help-block">填写学生的完整地址（包括省份、地区）</p>
							</div>
														
							<label class="control-label col-lg-1" for="student.phone">家长电 话</label>
							<div class="col-lg-3 ${ exist( phoneMsg!, 'has-error') }">
								<input type="text" class="form-control input-sm" name="student.phone" value="${student.phone!}" />
							</div>
							<p class="help-block col-lg-2">家长联系方式（必填项）</p>
						</div>
						
						<div class="form-group">
							<label class="control-label col-lg-1" for="student.image">图 片</label>
							<div class="col-lg-3 ${ exist( imageMsg!, 'has-error') }">
								<input type="file" class="form-control input-sm" name="student.image" value="${student.image!}" />
							</div>
							<p class="help-block col-lg-2">（必填项）</p>
							
							<label class="control-label col-lg-1" for="student.sort">排序值</label>
							<div class="col-lg-3">
								<input type="text" class="form-control input-sm" name="student.sort" value="${student.sort!}" />
								<p class="help-block">0~255之间的整数，数值越大，排序越靠前，默认为0（可选）</p>
							</div>
						</div>
						
						<div class="form-group">
	
							<label class="control-label col-lg-1" for="student.desc">学生简介</label>
							<div class="col-lg-9 ${ exist( descMsg!, 'has-error') }">
								<textarea class="form-control" rows="4" name="student.desc">${student.desc!}</textarea>
							</div>
							<p class="help-block col-lg-2">（必填）</p>
		
						</div>

						<hr />
						<div class="form-group ">
							<div class="col-lg-offset-1 col-lg-9">
								<button type="submit" class="btn btn-primary">提 交</button>
								<button type="reset" class="btn btn-danger">重 置</button>
							</div>
						</div>
					</form>
				</div>
			</div>
			
			<div class="widget-foot">

			</div>
			
		</div>
	</div>
</div>


<script type="text/javascript">
	
	
	function getClass() {
		
		var value = $('select[name="student.sid"]').val();
		$.getJSON("${CONTEXT_PATH}/admin/student/getClassBySchool/" + value, function (data) {
			
			$('select[name="student.cid"]').html("");
			$('select[name="student.cid"]').append($("<option/>").text("请选择班级").attr("value", -1));
			//对请求返回的JSON格式进行分解加载
	        $.each(data.json, function(idx, item) {
	            $('select[name="student.cid"]').append($("<option/>").text(item).attr("value", idx));
	        });
			
	    });
	}
	
	
	$(document).ready(function() {
		
		
		$('select[name="student.sid"]').change(function(){  

			getClass();
			
		});
	});

</script>



<# } #>
